(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){a(require("jquery"))}else{a(jQuery)}}})(function(j){j.support.htmlMenuitem=("HTMLMenuItemElement" in window);j.support.htmlCommand=("HTMLCommandElement" in window);j.support.eventSelectstart=("onselectstart" in document.documentElement);if(!j.ui||!j.widget){j.cleanData=(function(q){return function(r){var t,u,s;for(s=0;r[s]!=null;s++){u=r[s];try{t=j._data(u,"events");if(t&&t.remove){j(u).triggerHandler("remove")}}catch(v){}}q(r)}})(j.cleanData)}var h=null,f=false,d=j(window),a=0,b={},i={},m={},g={selector:null,appendTo:null,trigger:"right",autoHide:false,delay:200,reposition:true,hideOnSecondTrigger:false,selectableSubMenu:false,classNames:{hover:"context-menu-hover",disabled:"context-menu-disabled",visible:"context-menu-visible",notSelectable:"context-menu-not-selectable",icon:"context-menu-icon",iconEdit:"context-menu-icon-edit",iconCut:"context-menu-icon-cut",iconCopy:"context-menu-icon-copy",iconPaste:"context-menu-icon-paste",iconDelete:"context-menu-icon-delete",iconAdd:"context-menu-icon-add",iconQuit:"context-menu-icon-quit",iconLoadingClass:"context-menu-icon-loading"},determinePosition:function(q){if(j.ui&&j.ui.position){q.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none")}else{var r=this.offset();r.top+=this.outerHeight();r.left+=this.outerWidth()/2-q.outerWidth()/2;q.css(r)}},position:function(s,w,v){var t;if(!w&&!v){s.determinePosition.call(this,s.$menu);return}else{if(w==="maintain"&&v==="maintain"){t=s.$menu.position()}else{var u=s.$menu.offsetParent().offset();t={top:v-u.top,left:w-u.left}}}var q=d.scrollTop()+d.height(),z=d.scrollLeft()+d.width(),A=s.$menu.outerHeight(),r=s.$menu.outerWidth();if(t.top+A>q){t.top-=A}if(t.top<0){t.top=0}if(t.left+r>z){t.left-=r}if(t.left<0){t.left=0}s.$menu.css(t)},positionSubmenu:function(q){if(typeof q==="undefined"){return}if(j.ui&&j.ui.position){q.css("display","block").position({my:"left top-5",at:"right top",of:this,collision:"flipfit fit"}).css("display","")}else{var r={top:-9,left:this.outerWidth()-5};q.css(r)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:j.noop,hide:j.noop,activated:j.noop},callback:null,items:{}},n={timer:null,pageX:null,pageY:null},p=function(s){var r=0,q=s;while(true){r=Math.max(r,parseInt(q.css("z-index"),10)||0);q=q.parent();if(!q||!q.length||"html body".indexOf(q.prop("nodeName").toLowerCase())>-1){break}}return r},l={abortevent:function(q){q.preventDefault();q.stopImmediatePropagation()},contextmenu:function(s){var r=j(this);if(s.data.trigger==="right"){s.preventDefault();s.stopImmediatePropagation()}if((s.data.trigger!=="right"&&s.data.trigger!=="demand")&&s.originalEvent){return}if(typeof s.mouseButton!=="undefined"&&s.data){if(!(s.data.trigger==="left"&&s.mouseButton===0)&&!(s.data.trigger==="right"&&s.mouseButton===2)){return}}if(r.hasClass("context-menu-active")){return}if(!r.hasClass("context-menu-disabled")){h=r;if(s.data.build){var q=s.data.build(h,s);if(q===false){return}s.data=j.extend(true,{},g,s.data,q||{});if(!s.data.items||j.isEmptyObject(s.data.items)){if(window.console){(console.error||console.log).call(console,"No items specified to show in contextMenu")}throw new Error("No Items specified")}s.data.$trigger=h;k.create(s.data)}k.show.call(r,s.data,s.pageX,s.pageY)}},click:function(q){q.preventDefault();q.stopImmediatePropagation();j(this).trigger(j.Event("contextmenu",{data:q.data,pageX:q.pageX,pageY:q.pageY}))},mousedown:function(r){var q=j(this);if(h&&h.length&&!h.is(q)){h.data("contextMenu").$menu.trigger("contextmenu:hide")}if(r.button===2){h=q.data("contextMenuActive",true)}},mouseup:function(r){var q=j(this);if(q.data("contextMenuActive")&&h&&h.length&&h.is(q)&&!q.hasClass("context-menu-disabled")){r.preventDefault();r.stopImmediatePropagation();h=q;q.trigger(j.Event("contextmenu",{data:r.data,pageX:r.pageX,pageY:r.pageY}))}q.removeData("contextMenuActive")},mouseenter:function(s){var r=j(this),q=j(s.relatedTarget),t=j(document);if(q.is(".context-menu-list")||q.closest(".context-menu-list").length){return}if(h&&h.length){return}n.pageX=s.pageX;n.pageY=s.pageY;n.data=s.data;t.on("mousemove.contextMenuShow",l.mousemove);n.timer=setTimeout(function(){n.timer=null;t.off("mousemove.contextMenuShow");h=r;r.trigger(j.Event("contextmenu",{data:n.data,pageX:n.pageX,pageY:n.pageY}))},s.data.delay)},mousemove:function(q){n.pageX=q.pageX;n.pageY=q.pageY},mouseleave:function(r){var q=j(r.relatedTarget);if(q.is(".context-menu-list")||q.closest(".context-menu-list").length){return}try{clearTimeout(n.timer)}catch(r){}n.timer=null},layerClick:function(t){var v=j(this),z=v.data("contextMenuRoot"),s=t.button,A=t.pageX,w=t.pageY,r=A===undefined,u,q;t.preventDefault();setTimeout(function(){if(r){if(z!==null&&typeof z!=="undefined"&&z.$menu!==null&&typeof z.$menu!=="undefined"){z.$menu.trigger("contextmenu:hide")}return}var C;var x=((z.trigger==="left"&&s===0)||(z.trigger==="right"&&s===2));if(document.elementFromPoint&&z.$layer){z.$layer.hide();u=document.elementFromPoint(A-d.scrollLeft(),w-d.scrollTop());if(u.isContentEditable){var y=document.createRange(),B=window.getSelection();y.selectNode(u);y.collapse(true);B.removeAllRanges();B.addRange(y)}j(u).trigger(t);z.$layer.show()}if(z.hideOnSecondTrigger&&x&&z.$menu!==null&&typeof z.$menu!=="undefined"){z.$menu.trigger("contextmenu:hide");return}if(z.reposition&&x){if(document.elementFromPoint){if(z.$trigger.is(u)){z.position.call(z.$trigger,z,A,w);return}}else{q=z.$trigger.offset();C=j(window);q.top+=C.scrollTop();if(q.top<=t.pageY){q.left+=C.scrollLeft();if(q.left<=t.pageX){q.bottom=q.top+z.$trigger.outerHeight();if(q.bottom>=t.pageY){q.right=q.left+z.$trigger.outerWidth();if(q.right>=t.pageX){z.position.call(z.$trigger,z,A,w);return}}}}}}if(u&&x){z.$trigger.one("contextmenu:hidden",function(){j(u).contextMenu({x:A,y:w,button:s})})}if(z!==null&&typeof z!=="undefined"&&z.$menu!==null&&typeof z.$menu!=="undefined"){z.$menu.trigger("contextmenu:hide")}},50)},keyStop:function(r,q){if(!q.isInput){r.preventDefault()}r.stopPropagation()},key:function(u){var s={};if(h){s=h.data("contextMenu")||{}}if(typeof s.zIndex==="undefined"){s.zIndex=0}var w=0;var v=function(x){if(x.style.zIndex!==""){w=x.style.zIndex}else{if(x.offsetParent!==null&&typeof x.offsetParent!=="undefined"){v(x.offsetParent)}else{if(x.parentElement!==null&&typeof x.parentElement!=="undefined"){v(x.parentElement)}}}};v(u.target);if(s.$menu&&parseInt(w,10)>parseInt(s.$menu.css("zIndex"),10)){return}switch(u.keyCode){case 9:case 38:l.keyStop(u,s);if(s.isInput){if(u.keyCode===9&&u.shiftKey){u.preventDefault();if(s.$selected){s.$selected.find("input, textarea, select").blur()}if(s.$menu!==null&&typeof s.$menu!=="undefined"){s.$menu.trigger("prevcommand")}return}else{if(u.keyCode===38&&s.$selected.find("input, textarea, select").prop("type")==="checkbox"){u.preventDefault();return}}}else{if(u.keyCode!==9||u.shiftKey){if(s.$menu!==null&&typeof s.$menu!=="undefined"){s.$menu.trigger("prevcommand")}return}}break;case 40:l.keyStop(u,s);if(s.isInput){if(u.keyCode===9){u.preventDefault();if(s.$selected){s.$selected.find("input, textarea, select").blur()}if(s.$menu!==null&&typeof s.$menu!=="undefined"){s.$menu.trigger("nextcommand")}return}else{if(u.keyCode===40&&s.$selected.find("input, textarea, select").prop("type")==="checkbox"){u.preventDefault();return}}}else{if(s.$menu!==null&&typeof s.$menu!=="undefined"){s.$menu.trigger("nextcommand")}return}break;case 37:l.keyStop(u,s);if(s.isInput||!s.$selected||!s.$selected.length){break}if(!s.$selected.parent().hasClass("context-menu-root")){var t=s.$selected.parent().parent();s.$selected.trigger("contextmenu:blur");s.$selected=t;return}break;case 39:l.keyStop(u,s);if(s.isInput||!s.$selected||!s.$selected.length){break}var r=s.$selected.data("contextMenu")||{};if(r.$menu&&s.$selected.hasClass("context-menu-submenu")){s.$selected=null;r.$selected=null;r.$menu.trigger("nextcommand");return}break;case 35:case 36:if(s.$selected&&s.$selected.find("input, textarea, select").length){return}else{(s.$selected&&s.$selected.parent()||s.$menu).children(":not(."+s.classNames.disabled+", ."+s.classNames.notSelectable+")")[u.keyCode===36?"first":"last"]().trigger("contextmenu:focus");u.preventDefault();return}break;case 13:l.keyStop(u,s);if(s.isInput){if(s.$selected&&!s.$selected.is("textarea, select")){u.preventDefault();return}break}if(typeof s.$selected!=="undefined"&&s.$selected!==null){s.$selected.trigger("mouseup")}return;case 32:case 33:case 34:l.keyStop(u,s);return;case 27:l.keyStop(u,s);if(s.$menu!==null&&typeof s.$menu!=="undefined"){s.$menu.trigger("contextmenu:hide")}return;default:var q=(String.fromCharCode(u.keyCode)).toUpperCase();if(s.accesskeys&&s.accesskeys[q]){s.accesskeys[q].$node.trigger(s.accesskeys[q].$menu?"contextmenu:focus":"mouseup");return}break}u.stopPropagation();if(typeof s.$selected!=="undefined"&&s.$selected!==null){s.$selected.trigger(u)}},prevItem:function(v){v.stopPropagation();var u=j(this).data("contextMenu")||{};var r=j(this).data("contextMenuRoot")||{};if(u.$selected){var q=u.$selected;u=u.$selected.parent().data("contextMenu")||{};u.$selected=q}var t=u.$menu.children(),s=!u.$selected||!u.$selected.prev().length?t.last():u.$selected.prev(),x=s;while(s.hasClass(r.classNames.disabled)||s.hasClass(r.classNames.notSelectable)||s.is(":hidden")){if(s.prev().length){s=s.prev()}else{s=t.last()}if(s.is(x)){return}}if(u.$selected){l.itemMouseleave.call(u.$selected.get(0),v)}l.itemMouseenter.call(s.get(0),v);var w=s.find("input, textarea, select");if(w.length){w.focus()}},nextItem:function(v){v.stopPropagation();var u=j(this).data("contextMenu")||{};var s=j(this).data("contextMenuRoot")||{};if(u.$selected){var q=u.$selected;u=u.$selected.parent().data("contextMenu")||{};u.$selected=q}var t=u.$menu.children(),r=!u.$selected||!u.$selected.next().length?t.first():u.$selected.next(),x=r;while(r.hasClass(s.classNames.disabled)||r.hasClass(s.classNames.notSelectable)||r.is(":hidden")){if(r.next().length){r=r.next()}else{r=t.first()}if(r.is(x)){return}}if(u.$selected){l.itemMouseleave.call(u.$selected.get(0),v)}l.itemMouseenter.call(r.get(0),v);var w=r.find("input, textarea, select");if(w.length){w.focus()}},focusInput:function(){var t=j(this).closest(".context-menu-item"),s=t.data(),r=s.contextMenu,q=s.contextMenuRoot;q.$selected=r.$selected=t;q.isInput=r.isInput=true},blurInput:function(){var t=j(this).closest(".context-menu-item"),s=t.data(),r=s.contextMenu,q=s.contextMenuRoot;q.isInput=r.isInput=false},menuMouseenter:function(){var q=j(this).data().contextMenuRoot;q.hovering=true},menuMouseleave:function(r){var q=j(this).data().contextMenuRoot;if(q.$layer&&q.$layer.is(r.relatedTarget)){q.hovering=false}},itemMouseenter:function(u){var t=j(this),s=t.data(),r=s.contextMenu,q=s.contextMenuRoot;q.hovering=true;if(u&&q.$layer&&q.$layer.is(u.relatedTarget)){u.preventDefault();u.stopImmediatePropagation()}(r.$menu?r:q).$menu.children("."+q.classNames.hover).trigger("contextmenu:blur").children(".hover").trigger("contextmenu:blur");if(t.hasClass(q.classNames.disabled)||t.hasClass(q.classNames.notSelectable)){r.$selected=null;return}t.trigger("contextmenu:focus")},itemMouseleave:function(u){var t=j(this),s=t.data(),r=s.contextMenu,q=s.contextMenuRoot;if(q!==r&&q.$layer&&q.$layer.is(u.relatedTarget)){if(typeof q.$selected!=="undefined"&&q.$selected!==null){q.$selected.trigger("contextmenu:blur")}u.preventDefault();u.stopImmediatePropagation();q.$selected=r.$selected=r.$node;return}if(r&&r.$menu&&r.$menu.hasClass("context-menu-visible")){return}t.trigger("contextmenu:blur")},itemClick:function(v){var u=j(this),t=u.data(),s=t.contextMenu,q=t.contextMenuRoot,r=t.contextMenuKey,w;if(!s.items[r]||u.is("."+q.classNames.disabled+", .context-menu-separator, ."+q.classNames.notSelectable)||(u.is(".context-menu-submenu")&&q.selectableSubMenu===false)){return}v.preventDefault();v.stopImmediatePropagation();if(j.isFunction(s.callbacks[r])&&Object.prototype.hasOwnProperty.call(s.callbacks,r)){w=s.callbacks[r]}else{if(j.isFunction(q.callback)){w=q.callback}else{return}}if(w.call(q.$trigger,r,q,v)!==false){q.$menu.trigger("contextmenu:hide")}else{if(q.$menu.parent().length){k.update.call(q.$trigger,q)}}},inputClick:function(q){q.stopImmediatePropagation()},hideMenu:function(s,r){var q=j(this).data("contextMenuRoot");k.hide.call(q.$trigger,q,r&&r.force)},focusItem:function(u){u.stopPropagation();var t=j(this),s=t.data(),r=s.contextMenu,q=s.contextMenuRoot;if(t.hasClass(q.classNames.disabled)||t.hasClass(q.classNames.notSelectable)){return}t.addClass([q.classNames.hover,q.classNames.visible].join(" ")).parent().find(".context-menu-item").not(t).removeClass(q.classNames.visible).filter("."+q.classNames.hover).trigger("contextmenu:blur");r.$selected=q.$selected=t;if(r&&r.$node&&r.$node.hasClass("context-menu-submenu")){r.$node.addClass(q.classNames.hover)}if(r.$node){q.positionSubmenu.call(r.$node,r.$menu)}},blurItem:function(u){u.stopPropagation();var t=j(this),s=t.data(),r=s.contextMenu,q=s.contextMenuRoot;if(r.autoHide){t.removeClass(q.classNames.visible)}t.removeClass(q.classNames.hover);r.$selected=null}},k={show:function(u,r,w){var q=j(this),t={};j("#context-menu-layer").trigger("mousedown");u.$trigger=q;if(u.events.show.call(q,u)===false){h=null;return}var s=k.update.call(q,u);if(s===false){h=null;return}u.position.call(q,u,r,w);if(u.zIndex){var v=u.zIndex;if(typeof u.zIndex==="function"){v=u.zIndex.call(q,u)}t.zIndex=p(q)+v}k.layer.call(u.$menu,u,t.zIndex);u.$menu.find("ul").css("zIndex",t.zIndex+1);u.$menu.css(t)[u.animation.show](u.animation.duration,function(){q.trigger("contextmenu:visible");k.activated(u);u.events.activated(u)});q.data("contextMenu",u).addClass("context-menu-active");j(document).off("keydown.contextMenu").on("keydown.contextMenu",l.key);if(u.autoHide){j(document).on("mousemove.contextMenuAutoHide",function(x){var y=q.offset();y.right=y.left+q.outerWidth();y.bottom=y.top+q.outerHeight();if(u.$layer&&!u.hovering&&(!(x.pageX>=y.left&&x.pageX<=y.right)||!(x.pageY>=y.top&&x.pageY<=y.bottom))){setTimeout(function(){if(!u.hovering&&u.$menu!==null&&typeof u.$menu!=="undefined"){u.$menu.trigger("contextmenu:hide")}},50)}})}},hide:function(r,s){var q=j(this);if(!r){r=q.data("contextMenu")||{}}if(!s&&r.events&&r.events.hide.call(q,r)===false){return}q.removeData("contextMenu").removeClass("context-menu-active");if(r.$layer){setTimeout((function(u){return function(){u.remove()}})(r.$layer),10);try{delete r.$layer}catch(t){r.$layer=null}}h=null;r.$menu.find("."+r.classNames.hover).trigger("contextmenu:blur");r.$selected=null;r.$menu.find("."+r.classNames.visible).removeClass(r.classNames.visible);j(document).off(".contextMenuAutoHide").off("keydown.contextMenu");if(r.$menu){r.$menu[r.animation.hide](r.animation.duration,function(){if(r.build){r.$menu.remove();j.each(r,function(u){switch(u){case"ns":case"selector":case"build":case"trigger":return true;default:r[u]=undefined;try{delete r[u]}catch(v){}return true}})}setTimeout(function(){q.trigger("contextmenu:hidden")},10)})}},create:function(r,q){if(typeof q==="undefined"){q=r}r.$menu=j('<ul class="context-menu-list"></ul>').addClass(r.className||"").data({contextMenu:r,contextMenuRoot:q});j.each(["callbacks","commands","inputs"],function(u,t){r[t]={};if(!q[t]){q[t]={}}});if(!q.accesskeys){q.accesskeys={}}function s(t){var u=j("<span></span>");if(t._accesskey){if(t._beforeAccesskey){u.append(document.createTextNode(t._beforeAccesskey))}j("<span></span>").addClass("context-menu-accesskey").text(t._accesskey).appendTo(u);if(t._afterAccesskey){u.append(document.createTextNode(t._afterAccesskey))}}else{if(t.isHtmlName){if(typeof t.accesskey!=="undefined"){throw new Error("accesskeys are not compatible with HTML names and cannot be used together in the same item")}u.html(t.name)}else{u.text(t.name)}}return u}j.each(r.items,function(A,B){var u=j('<li class="context-menu-item"></li>').addClass(B.className||""),y=null,x=null;u.on("click",j.noop);if(typeof B==="string"||B.type==="cm_separator"){B={type:"cm_seperator"}}B.$node=u.data({contextMenu:r,contextMenuRoot:q,contextMenuKey:A});if(typeof B.accesskey!=="undefined"){var z=c(B.accesskey);for(var v=0,w;w=z[v];v++){if(!q.accesskeys[w]){q.accesskeys[w]=B;var t=B.name.match(new RegExp("^(.*?)("+w+")(.*)$","i"));if(t){B._beforeAccesskey=t[1];B._accesskey=t[2];B._afterAccesskey=t[3]}break}}}if(B.type&&m[B.type]){m[B.type].call(u,B,r,q);j.each([r,q],function(D,C){C.commands[A]=B;if(j.isFunction(B.callback)&&(typeof C.callbacks[A]==="undefined"||typeof r.type==="undefined")){C.callbacks[A]=B.callback}})}else{if(B.type==="cm_seperator"){u.addClass("context-menu-separator "+q.classNames.notSelectable)}else{if(B.type==="html"){u.addClass("context-menu-html "+q.classNames.notSelectable)}else{if(B.type!=="sub"&&B.type){y=j("<label></label>").appendTo(u);s(B).appendTo(y);u.addClass("context-menu-input");r.hasTypes=true;j.each([r,q],function(D,C){C.commands[A]=B;C.inputs[A]=B})}else{if(B.items){B.type="sub"}}}}switch(B.type){case"cm_seperator":break;case"text":x=j('<input type="text" value="1" name="" />').attr("name","context-menu-input-"+A).val(B.value||"").appendTo(y);break;case"textarea":x=j('<textarea name=""></textarea>').attr("name","context-menu-input-"+A).val(B.value||"").appendTo(y);if(B.height){x.height(B.height)}break;case"checkbox":x=j('<input type="checkbox" value="1" name="" />').attr("name","context-menu-input-"+A).val(B.value||"").prop("checked",!!B.selected).prependTo(y);break;case"radio":x=j('<input type="radio" value="1" name="" />').attr("name","context-menu-input-"+B.radio).val(B.value||"").prop("checked",!!B.selected).prependTo(y);break;case"select":x=j('<select name=""></select>').attr("name","context-menu-input-"+A).appendTo(y);if(B.options){j.each(B.options,function(C,D){j("<option></option>").val(C).text(D).appendTo(x)});x.val(B.selected)}break;case"sub":s(B).appendTo(u);B.appendTo=B.$node;u.data("contextMenu",B).addClass("context-menu-submenu");B.callback=null;if("function"===typeof B.items.then){k.processPromises(B,q,B.items)}else{k.create(B,q)}break;case"html":j(B.html).appendTo(u);break;default:j.each([r,q],function(D,C){C.commands[A]=B;if(j.isFunction(B.callback)&&(typeof C.callbacks[A]==="undefined"||typeof r.type==="undefined")){C.callbacks[A]=B.callback}});s(B).appendTo(u);break}if(B.type&&B.type!=="sub"&&B.type!=="html"&&B.type!=="cm_seperator"){x.on("focus",l.focusInput).on("blur",l.blurInput);if(B.events){x.on(B.events,r)}}if(B.icon){if(j.isFunction(B.icon)){B._icon=B.icon.call(this,this,u,A,B)}else{if(typeof(B.icon)==="string"&&(B.icon.substring(0,4)==="fab "||B.icon.substring(0,4)==="fas "||B.icon.substring(0,4)==="far "||B.icon.substring(0,4)==="fal ")){u.addClass(q.classNames.icon+" "+q.classNames.icon+"--fa5");B._icon=j('<i class="'+B.icon+'"></i>')}else{if(typeof(B.icon)==="string"&&B.icon.substring(0,3)==="fa-"){B._icon=q.classNames.icon+" "+q.classNames.icon+"--fa fa "+B.icon}else{B._icon=q.classNames.icon+" "+q.classNames.icon+"-"+B.icon}}}if(typeof(B._icon)==="string"){u.addClass(B._icon)}else{u.prepend(B._icon)}}}B.$input=x;B.$label=y;u.appendTo(r.$menu);if(!r.hasTypes&&j.support.eventSelectstart){u.on("selectstart.disableTextSelect",l.abortevent)}});if(!r.$node){r.$menu.css("display","none").addClass("context-menu-root")}r.$menu.appendTo(r.appendTo||document.body)},resize:function(q,s){var r;q.css({position:"absolute",display:"block"});q.data("width",(r=q.get(0)).getBoundingClientRect?Math.ceil(r.getBoundingClientRect().width):q.outerWidth()+1);q.css({position:"static",minWidth:"0px",maxWidth:"100000px"});q.find("> li > ul").each(function(){k.resize(j(this),true)});if(!s){q.find("ul").addBack().css({position:"",display:"",minWidth:"",maxWidth:""}).outerWidth(function(){return j(this).data("width")})}},update:function(t,r){var q=this;if(typeof r==="undefined"){r=t;k.resize(t.$menu)}var s=false;t.$menu.children().each(function(){var v=j(this),w=v.data("contextMenuKey"),y=t.items[w],x=(j.isFunction(y.disabled)&&y.disabled.call(q,w,r))||y.disabled===true,z;if(j.isFunction(y.visible)){z=y.visible.call(q,w,r)}else{if(typeof y.visible!=="undefined"){z=y.visible===true}else{z=true}}if(z){s=true}v[z?"show":"hide"]();v[x?"addClass":"removeClass"](r.classNames.disabled);if(j.isFunction(y.icon)){v.removeClass(y._icon);var A=y.icon.call(this,q,v,w,y);if(typeof(A)==="string"){v.addClass(A)}else{v.prepend(A)}}if(y.type){v.find("input, select, textarea").prop("disabled",x);switch(y.type){case"text":case"textarea":y.$input.val(y.value||"");break;case"checkbox":case"radio":y.$input.val(y.value||"").prop("checked",!!y.selected);break;case"select":y.$input.val((y.selected===0?"0":y.selected)||"");break}}if(y.$menu){var u=k.update.call(q,y,r);if(u){s=true}}});return s},layer:function(r,s){var q=r.$layer=j('<div id="context-menu-layer"></div>').css({height:d.height(),width:d.width(),display:"block",position:"fixed","z-index":s,top:0,left:0,opacity:0,filter:"alpha(opacity=0)","background-color":"#000"}).data("contextMenuRoot",r).insertBefore(this).on("contextmenu",l.abortevent).on("mousedown",l.layerClick);if(typeof document.body.style.maxWidth==="undefined"){q.css({position:"absolute",height:j(document).height()})}return q},processPromises:function(r,q,v){r.$node.addClass(q.classNames.iconLoadingClass);function u(y,w,x){if(typeof x==="undefined"){s(undefined)}t(y,w,x)}function s(x,w,y){if(typeof y==="undefined"){y={error:{name:"No items and no error item",icon:"context-menu-icon context-menu-icon-quit"}};if(window.console){(console.error||console.log).call(console,'When you reject a promise, provide an "items" object, equal to normal sub-menu items')}}else{if(typeof y==="string"){y={error:{name:y}}}}t(x,w,y)}function t(y,w,x){if(typeof w.$menu==="undefined"||!w.$menu.is(":visible")){return}y.$node.removeClass(w.classNames.iconLoadingClass);y.items=x;k.create(y,w,true);k.update(y,w);w.positionSubmenu.call(y.$node,y.$menu)}v.then(u.bind(this,r,q),s.bind(this,r,q))},activated:function(s){var t=s.$menu;var u=t.offset();var q=j(window).height();var r=j(window).scrollTop();var v=t.height();if(v>q){t.css({height:q+"px","overflow-x":"hidden","overflow-y":"auto",top:r+"px"})}else{if((u.top<r)||(u.top+v>r+q)){t.css({top:"0px"})}}}};function c(v){var s=v.split(/\s+/);var u=[];for(var r=0,q;q=s[r];r++){q=q.charAt(0).toUpperCase();u.push(q)}return u}j.fn.contextMenu=function(q){var t=this,r=q;if(this.length>0){if(typeof q==="undefined"){this.first().trigger("contextmenu")}else{if(typeof q.x!=="undefined"&&typeof q.y!=="undefined"){this.first().trigger(j.Event("contextmenu",{pageX:q.x,pageY:q.y,mouseButton:q.button}))}else{if(q==="hide"){var s=this.first().data("contextMenu")?this.first().data("contextMenu").$menu:null;if(s){s.trigger("contextmenu:hide")}}else{if(q==="destroy"){j.contextMenu("destroy",{context:this})}else{if(j.isPlainObject(q)){q.context=this;j.contextMenu("create",q)}else{if(q){this.removeClass("context-menu-disabled")}else{if(!q){this.addClass("context-menu-disabled")}}}}}}}}else{j.each(i,function(){if(this.selector===t.selector){r.data=this;j.extend(r.data,{trigger:"demand"})}});l.contextmenu.call(r.target,r)}return this};j.contextMenu=function(v,B){if(typeof v!=="string"){B=v;v="create"}if(typeof B==="string"){B={selector:B}}else{if(typeof B==="undefined"){B={}}}var s=j.extend(true,{},g,B||{});var u=j(document);var z=u;var A=false;if(!s.context||!s.context.length){s.context=document}else{z=j(s.context).first();s.context=z.get(0);A=!j(s.context).is(document)}switch(v){case"update":if(A){k.update(z)}else{for(var t in i){if(i.hasOwnProperty(t)){k.update(i[t])}}}break;case"create":if(!s.selector){throw new Error("No selector specified")}if(s.selector.match(/.context-menu-(list|item|input)($|\s)/)){throw new Error('Cannot bind to selector "'+s.selector+'" as it contains a reserved className')}if(!s.build&&(!s.items||j.isEmptyObject(s.items))){throw new Error("No Items specified")}a++;s.ns=".contextMenu"+a;if(!A){b[s.selector]=s.ns}i[s.ns]=s;if(!s.trigger){s.trigger="right"}if(!f){var w=s.itemClickEvent==="click"?"click.contextMenu":"mouseup.contextMenu";var x={"contextmenu:focus.contextMenu":l.focusItem,"contextmenu:blur.contextMenu":l.blurItem,"contextmenu.contextMenu":l.abortevent,"mouseenter.contextMenu":l.itemMouseenter,"mouseleave.contextMenu":l.itemMouseleave};x[w]=l.itemClick;u.on({"contextmenu:hide.contextMenu":l.hideMenu,"prevcommand.contextMenu":l.prevItem,"nextcommand.contextMenu":l.nextItem,"contextmenu.contextMenu":l.abortevent,"mouseenter.contextMenu":l.menuMouseenter,"mouseleave.contextMenu":l.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",l.inputClick).on(x,".context-menu-item");f=true}z.on("contextmenu"+s.ns,s.selector,s,l.contextmenu);if(A){z.on("remove"+s.ns,function(){j(this).contextMenu("destroy")})}switch(s.trigger){case"hover":z.on("mouseenter"+s.ns,s.selector,s,l.mouseenter).on("mouseleave"+s.ns,s.selector,s,l.mouseleave);break;case"left":z.on("click"+s.ns,s.selector,s,l.click);break;case"touchstart":z.on("touchstart"+s.ns,s.selector,s,l.click);break}if(!s.build){k.create(s)}break;case"destroy":var r;if(A){var q=s.context;j.each(i,function(C,E){if(!E){return true}if(!j(q).is(E.selector)){return true}r=j(".context-menu-list").filter(":visible");if(r.length&&r.data().contextMenuRoot.$trigger.is(j(E.context).find(E.selector))){r.trigger("contextmenu:hide",{force:true})}try{if(i[E.ns].$menu){i[E.ns].$menu.remove()}delete i[E.ns]}catch(D){i[E.ns]=null}j(E.context).off(E.ns);return true})}else{if(!s.selector){u.off(".contextMenu .contextMenuAutoHide");j.each(i,function(C,D){j(D.context).off(D.ns)});b={};i={};a=0;f=false;j("#context-menu-layer, .context-menu-list").remove()}else{if(b[s.selector]){r=j(".context-menu-list").filter(":visible");if(r.length&&r.data().contextMenuRoot.$trigger.is(s.selector)){r.trigger("contextmenu:hide",{force:true})}try{if(i[b[s.selector]].$menu){i[b[s.selector]].$menu.remove()}delete i[b[s.selector]]}catch(y){i[b[s.selector]]=null}u.off(b[s.selector])}}}break;case"html5":if((!j.support.htmlCommand&&!j.support.htmlMenuitem)||(typeof B==="boolean"&&B)){j('menu[type="context"]').each(function(){if(this.id){j.contextMenu({selector:"[contextmenu="+this.id+"]",items:j.contextMenu.fromMenu(this)})}}).css("display","none")}break;default:throw new Error('Unknown operation "'+v+'"')}return this};j.contextMenu.setInputValues=function(q,r){if(typeof r==="undefined"){r={}}j.each(q.inputs,function(s,t){switch(t.type){case"text":case"textarea":t.value=r[s]||"";break;case"checkbox":t.selected=r[s]?true:false;break;case"radio":t.selected=(r[t.radio]||"")===t.value;break;case"select":t.selected=r[s]||"";break}})};j.contextMenu.getInputValues=function(q,r){if(typeof r==="undefined"){r={}}j.each(q.inputs,function(s,t){switch(t.type){case"text":case"textarea":case"select":r[s]=t.$input.val();break;case"checkbox":r[s]=t.$input.prop("checked");break;case"radio":if(t.$input.prop("checked")){r[t.radio]=t.value}break}});return r};function e(q){return(q.id&&j('label[for="'+q.id+'"]').val())||q.name}function o(s,r,q){if(!q){q=0}r.each(function(){var t=j(this),w=this,x=this.nodeName.toLowerCase(),u,v;if(x==="label"&&t.find("input, textarea, select").length){u=t.text();t=t.children().first();w=t.get(0);x=w.nodeName.toLowerCase()}switch(x){case"menu":v={name:t.attr("label"),items:{}};q=o(v.items,t.children(),q);break;case"a":case"button":v={name:t.text(),disabled:!!t.attr("disabled"),callback:(function(){return function(){t.get(0).click()}})()};break;case"menuitem":case"command":switch(t.attr("type")){case undefined:case"command":case"menuitem":v={name:t.attr("label"),disabled:!!t.attr("disabled"),icon:t.attr("icon"),callback:(function(){return function(){t.get(0).click()}})()};break;case"checkbox":v={type:"checkbox",disabled:!!t.attr("disabled"),name:t.attr("label"),selected:!!t.attr("checked")};break;case"radio":v={type:"radio",disabled:!!t.attr("disabled"),name:t.attr("label"),radio:t.attr("radiogroup"),value:t.attr("id"),selected:!!t.attr("checked")};break;default:v=undefined}break;case"hr":v="-------";break;case"input":switch(t.attr("type")){case"text":v={type:"text",name:u||e(w),disabled:!!t.attr("disabled"),value:t.val()};break;case"checkbox":v={type:"checkbox",name:u||e(w),disabled:!!t.attr("disabled"),selected:!!t.attr("checked")};break;case"radio":v={type:"radio",name:u||e(w),disabled:!!t.attr("disabled"),radio:!!t.attr("name"),value:t.val(),selected:!!t.attr("checked")};break;default:v=undefined;break}break;case"select":v={type:"select",name:u||e(w),disabled:!!t.attr("disabled"),selected:t.val(),options:{}};t.children().each(function(){v.options[this.value]=j(this).text()});break;case"textarea":v={type:"textarea",name:u||e(w),disabled:!!t.attr("disabled"),value:t.val()};break;case"label":break;default:v={type:"html",html:t.clone(true)};break}if(v){q++;s["key"+q]=v}});return q}j.contextMenu.fromMenu=function(r){var s=j(r),q={};o(q,s.children());return q};j.contextMenu.defaults=g;j.contextMenu.types=m;j.contextMenu.handle=l;j.contextMenu.op=k;j.contextMenu.menus=i});