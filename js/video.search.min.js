function resetData(){$(".video").remove()}document.addEventListener("DOMContentLoaded",function(){const e=document.getElementsByTagName("label"),t=document.querySelectorAll('input[name="sort"]'),a=document.querySelector('input[name="title"]'),i=document.querySelector('input[name="star"]'),n=document.querySelector("#websites > select"),d=document.querySelectorAll('input[name^="category_"]'),o=document.querySelectorAll('input[name^="attribute_"]'),r=document.querySelectorAll('input[name^="location_"]'),s=document.querySelector('input[name="existing"]'),l=document.querySelector('input[name="special_char"]'),c=document.getElementById("loader"),u=document.getElementById("update");$('[data-toggle="tooltip"]').tooltip(),$("select.pretty").prettyDropdown({height:30,classic:!0,hoverIntent:1e3});const v=function(){fetch("json/video.search.php").then(function(e){return e.json()}).then(function(e){const t=document.getElementById("videos"),a=document.createElement("div");a.classList.add("row");const i=e.videos;for(let e=0;e<i.length;e++){let t=i[e].md5,d=i[e].thumbnail,o=i[e].existing,r=i[e].videoID,s=i[e].videoName,l=i[e].videoDate,c=i[e].websiteName,u=parseInt(i[e].ageInVideo),v=i[e].star,g=i[e].category;g.length||g.push("0");let h=i[e].attribute;h.length||h.push("0");let p=i[e].location;p.length||p.push("0");let m=document.createElement("a");m.classList.add("video","ribbon-container","card"),m.setAttribute("href","video.php?id="+r),m.setAttribute("data-video-id",r),m.setAttribute("data-video-date",l),m.setAttribute("data-ageinvideo",u.toString()),m.setAttribute("data-title",s),m.setAttribute("data-star",v),m.setAttribute("data-website",c),m.setAttribute("data-existing",o),m.setAttribute("data-category-name",'["'+g+'"]'),m.setAttribute("data-attribute-name",'["'+h+'"]'),m.setAttribute("data-location-name",'["'+p+'"]');let b=document.createElement("img");b.classList.add("lazy","card-img-top"),b.setAttribute("data-src",d+"?v="+t);let f=document.createElement("span");if(f.classList.add("title","card-title"),f.textContent=s,m.appendChild(b),m.appendChild(f),u){let e=document.createElement("span");e.classList.add("ribbon"),e.textContent=(n=u,Math.floor(n/365)),m.appendChild(e)}a.appendChild(m)}var n;t.appendChild(a)}).then(function(){c.remove(),window.video=document.getElementsByClassName("video"),window.video_query=document.querySelectorAll(".video"),window.videoLength=video.length,window.$video=$(video)}).then(function(){for(let t=0;t<e.length;t++)e[t].addEventListener("click",function(){$(e[t].previousSibling).click()});function c(){let e=a.value.toLowerCase();l.checked&&(e=e.replace(/</g,"").replace(/>/g,"").replace(/:/g,"").replace(/\//g,"").replace(/\\/g,"").replace(/\|/g,"").replace(/\?/g,"").replace(/\*/g,"")),$video.removeClass("hidden-title"),$video.not(function(){return this.getAttribute("data-title").toLowerCase().indexOf(e)>-1}).addClass("hidden-title")}if(l.addEventListener("change",c),a.addEventListener("keyup",c),i.addEventListener("keyup",function(){let e=i.value.toLowerCase();$video.removeClass("hidden-star"),$video.not(function(){return this.getAttribute("data-star").toLowerCase().indexOf(e)>-1}).addClass("hidden-star")}),s.addEventListener("change",function(){if($video.removeClass("hidden-existing"),this.checked)for(let e=0;e<videoLength;e++)"0"===video[e].getAttribute("data-existing")&&video[e].classList.add("hidden-existing")}),n){const e=document.querySelectorAll("#websites > .prettydropdown");$(e).on("change",function(){$video.removeClass("hidden-website");let e=n.options[n.selectedIndex].textContent;for(let t=0;t<videoLength;t++)video[t].getAttribute("data-website")!==e&&"All"!==e&&video[t].classList.add("hidden-website")})}for(let e=0,t=d.length;e<t;e++)d[e].addEventListener("change",function(){d[e].parentElement.classList.toggle("selected");let t=this.name.split("category_").pop(),a=t.replace(/ /g,"-");for(let e=0;e<videoLength;e++){let a=video[e].getAttribute("data-category-name").slice(2,-2).split(",");for(let i=0,n=a.length;i<n;i++)this.checked&&("NULL"===t&&1===n&&"0"===a[i]?video[e].classList.add("tmp"):a[i]===t&&video[e].classList.add("tmp"))}this.checked?$video.not(".tmp").addClass("hidden-category-"+a):$video.removeClass("hidden-category-"+a),$video.removeClass("tmp")});for(let e=0,t=o.length;e<t;e++)o[e].addEventListener("change",function(){o[e].parentElement.classList.toggle("selected");let t=this.name.split("attribute_").pop(),a=t.replace(/ /g,"-");for(let e=0;e<videoLength;e++){let a=video[e].getAttribute("data-attribute-name").slice(2,-2).split(",");for(let i=0,n=a.length;i<n;i++)this.checked&&a[i]===t&&video[e].classList.add("tmp")}this.checked?$video.not(".tmp").addClass("hidden-attribute-"+a):$video.removeClass("hidden-attribute-"+a),$video.removeClass("tmp")});for(let e=0,t=r.length;e<t;e++)r[e].addEventListener("change",function(){r[e].parentElement.classList.toggle("selected");let t=this.name.split("location_").pop(),a=t.replace(/ /g,"-");for(let e=0;e<videoLength;e++){let a=video[e].getAttribute("data-location-name").slice(2,-2).split(",");for(let i=0,n=a.length;i<n;i++)this.checked&&a[i]===t&&video[e].classList.add("tmp")}this.checked?$video.not(".tmp").addClass("hidden-location-"+a):$video.removeClass("hidden-location-"+a),$video.removeClass("tmp")});for(let e=0;e<t.length;e++)t[e].addEventListener("change",function(){$(t).parent().removeClass("selected"),t[e].parentElement.classList.add("selected");let a=this.id,i=function(e,t){return e.querySelector("span").innerHTML.toLowerCase().localeCompare(t.querySelector("span").innerHTML.toLowerCase(),"en")},n=function(e,t){return t.querySelector("span").innerHTML.toLowerCase().localeCompare(e.querySelector("span").innerHTML.toLowerCase(),"en")},d=function(e,t){return e.getAttribute("data-video-id")-t.getAttribute("data-video-id")},o=function(e,t){return t.getAttribute("data-video-id")-e.getAttribute("data-video-id")},r=function(e,t){return e.getAttribute("data-ageinvideo")-t.getAttribute("data-ageinvideo")},s=function(e,t){return t.getAttribute("data-ageinvideo")-e.getAttribute("data-ageinvideo")},l=function(e,t){return new Date(e.getAttribute("data-video-date"))-new Date(t.getAttribute("data-video-date"))},c=function(e,t){return new Date(t.getAttribute("data-video-date"))-new Date(e.getAttribute("data-video-date"))};switch(a){case"alphabetically":$video.sort(i);break;case"alphabetically_desc":$video.sort(n);break;case"added":$video.sort(d);break;case"added_desc":$video.sort(o);break;case"date":$video.sort(l);break;case"date_desc":$video.sort(c);break;case"actor-age":$video.sort(r);break;case"actor-age_desc":$video.sort(s);break;default:console.log("No sort method for: "+a)}for(let e=0;e<videoLength;e++)$video[e].parentNode.appendChild($video[e])})}).then(function(){new LazyLoad({elements_selector:".lazy",threshold:300})})};v(),u.addEventListener("click",function(){resetData(),v()})});